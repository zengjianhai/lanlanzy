<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
	<meta content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0" name="viewport" />
	<meta name="referrer" content="never">
	<meta http-equiv="Expires" content="0">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-control" content="no-cache">
	<meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="javascript,vueJS,Jquery,AngularJS,HTML5,CSS3">
		<title>懒懒</title>
		<link rel="icon" href="img/icon.png" type="img/x-icon" />
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
		<style>
			.content:hover{
				box-shadow: 2px 2px 3px #e9e9e9;
				-webkit-box-shadow: 2px 2px 3px #e9e9e9;
			}
			.content{
				box-shadow: 0px 0px 3px #f0f0f0;
				width: 92%;
				margin: auto;
				height: 400px;
				border-radius: 3px;
			}
			.card{
				float: left;
				width: 33.3%;
				font-size: 0;
				display: inline-block;
				margin: 15px 0;
				cursor: pointer;
			}
			.showimg_area{
				color: #fff;
				overflow:hidden;
				border-radius: 3px 3px 0 0;
				height: 66%;
				background:#cecece;
				position: relative;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.showimg_area #img{
				width:100%;
				height: 100%;
				background-size: cover;
				transition: all .5s ease-in-out;
			}
			.showimg_area .img_large{
				transform: scale(1.1);
			}
			.img_shadowcalss{
				position: absolute;
				top: 0;
				left: 0;
				background: #00000077;
				width: 100%;
				height: 100%;
			}
			.showcontent_area{
				height: 34%;
				font-size: 16px;
				padding: 10px;
				position: relative;
			}
			@media (min-width: 768px) {
			  	.container {
			    	width: 750px;
			  	}
			}
			@media (min-width: 992px) {
			  	.container {
			    	width: 970px;
			  	}
			}
			@media (min-width: 1200px) {
			  	.container {
			   		width: 900px;
			  	}
			}
			@media (max-width: 880px){
				#main_content .card {
				    width: 50%;
			    }
			}
			@media (max-width: 580px){
				#main_content .card {
				    width: 100%;
				}
			}
			.title{
				word-break: break-all;
			}
			.sort{
				position: absolute;
				bottom: 0;
				right:0;
				width: 100%;
				padding: 0 15px 15px 15px;
				text-align: right;
				line-height: 40px;
			}
			.sort .sort_name{
				margin-right: 10px;
				color: #fff;
				font-size: 14px;
				display: inline-block;
			}
			.sort .sort_img{
				width: 40px;
				height: 40px;
				border-radius: 50%;
				border: 1px solid #aaaaaa66;
				float: right;
				display: inline-block;
				text-align: center;
				line-height: 40px;
				font-weight: 800;
				color: #987579;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.img_word{
				font-size: 30px;
				width: 90px;
				height: 90px;
			    background: #00000066;
			    line-height: 90px;
			    text-align: center;
			    border-radius: 20%;
			    transition: all .3s ease-in-out;
			}
			.img_wordclass{
				width: 108px;
				height: 108px;
				line-height: 108px;
				font-size: 36px;
			}
			.flap{
				position: absolute;
			    bottom: -75px;
			    left: 0;
			    width: 110%;
			    min-height: 100px;
			}
			.flag_right{
				background: #fff;
				-webkit-transform: rotate(7deg) translate(-10px,0);
    			-ms-transform: rotate(7deg) translate(-10px,0);
    			transform: rotate(7deg) translate(-10px,0);
    			z-index: 2;
			}
			.flag_left{
				background-color: rgba(0,0,0,.5)!important;
				z-index: 1;
				opacity: .7;
				-webkit-transform: rotate(-10deg) translate(10px,-10px);
    			-ms-transform: rotate(-10deg) translate(10px,-10px);
    			transform: rotate(-10deg) translate(10px,-10px);
			}
			.refresh_word{
				display: inline-block;
				width: 100%;
				text-align: center;
				font-size: 16px;
				margin-top: 20px;
				color: #666;
			}
			.line{
				margin-bottom: 5px;
			    width: 30%;
			    background: #cecece;
			    height: 1px;
			    display: inline-block;
			    margin-right: 5px;
			    margin-left: 5px;
			}
			.descclazz{
				position: absolute;top: 0;left: 0;line-height: 1.5;font-size: 16px;padding: 25px 35px;z-index: -1;
			}
			.descclass{
				z-index: 999;
				transform: scale(1.02);
    			transition: all 1s ease 0s;
			}
		</style>
	</head>
	<body>
		<div id="nav_content"></div>
		<div id="main_content">
			<div class="container tab-content" style="padding: 45px 0;">
				<div style="width:100%;position: relative;" id="b1">
				</div>
			</div>
		</div>
		<div id="footer_content"></div>
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/jquery.cookie.js"></script>
		<script src="js/util.js"></script>
		<script> 
			var colors = ['#987579','#992752','#337ab7','#ffac38','#8eb9f5','#ff8547','#50a14f','#4078f2','#e45649','#7a8f9a','#cecece'];
			var icons = ['img/android.PNG','img/book.PNG','img/braw.PNG','img/communication.PNG','img/game.PNG','img/idea.PNG','img/img.PNG','img/link.PNG','img/lock.PNG','img/write.PNG'];
			var startDataSizes = 6;
			var pageSizes = 6;
			$(function(){
				$("#nav_content").load("nav.html");
				var json=getSharedata("pageSize="+startDataSizes);
				createHtml(json);
			})
			var lasttime;
			getSharedata = function(params){
				var resultList=[];
				$.ajax({
					url:PATH+'share/shares?'+params,
					type:"GET",
					dataType: "json",
					contentType: "application/json",
					async: false,
					success:function(data){
						console.log(data);
						if(data.subCode==="1200000"){
							resultList = data.bodyMessage.pageDatas;
						}
					},
				});
				return resultList;
			}
			createHtml = function(list){
				var html = "";
				var titlehtml = "";
				for (var i = 0; i < list.length; i++) {
					lasttime = list[i].shareCreateTime;
					var imgarea = "<div id=\"img\" style=\"background:url("+list[i].shareImageUrl+") no-repeat center;\"></div>";
					if(StringEmpty(list[i].shareImageUrl)){
						imgarea = "<div class=\"img_word\" style=\"background:"+colors[Math.floor(Math.random()*10)]+"\">"+list[i].shareTitle.substring(0,1)+"</div>";
					}
					titlehtml = "<div class=\"sort_name label label-primary\" title=\""+list[i].categoryChildName+"\"><div style=\"display: flex;max-width: 48px;overflow: hidden;\">"+list[i].categoryChildName+"</div></div>";
					for (var j = 0; j < list[i].categoryUserList.length; j++) {
						if(j>=2){
							break
						}
						titlehtml = "<div class=\"sort_name label label-success\" title=\""+list[i].categoryUserList[j].categoryUserTitle+"\"><div style=\"display: flex;max-width: 48px;overflow: hidden;\">"+list[i].categoryUserList[j].categoryUserTitle+"</div></div>"+titlehtml;
					}
					html = html+"<div class=\"card\" onclick=\"detail("+list[i].shareId+");\"><div class=\"content\"><div class=\"showimg_area\">"+imgarea+"<div id=\"img_shadow\"></div><div class=\"flap flag_right\"></div><div class=\"flap flag_left\"></div><div id=\"desc\" class=\"descclazz\">"+list[i].shareBrief+"</div></div><div class=\"showcontent_area\"><div class=\"title\">"+list[i].shareTitle+"</div><div class=\"sort\">"+titlehtml+"<div class=\"sort_img\" class=\"sort_img\"><img style=\"width:60%;\" src=\""+icons[Math.floor(Math.random()*10)]+"\"></div></div></div></div></div>";
				}
				console.log(""+lasttime);
				$("#main_content .container #b1").append(html);
				caedhover();
			}
			caedhover = function(){
				$('.content').hover(function(){
					$(this).find("#img_shadow").addClass("img_shadowcalss");
					$(this).find("#img").addClass("img_large");
					$(this).find(".img_word").addClass("img_wordclass");
					$(this).find("#desc").addClass("descclass");
				},function(){
					$(this).find("#img_shadow").removeClass('img_shadowcalss');
					$(this).find("#img").removeClass('img_large');
					$(this).find(".img_word").removeClass('img_wordclass');
					$(this).find("#desc").removeClass('descclass');
				});
			}
			window.onscroll = function () {
			    if(getScrollHeight() == getDocumentTop() + getWindowHeight()){
			    	var json=getSharedata("pageSize="+pageSizes+"&lastTime="+lasttime);
			    	$("#main_content .container #b1 .refresh_word").remove();
			    	if(json.length==0){
			    		$("#main_content .container #b1").append("<div class=\"refresh_word\"><span class='line'></span>我是有底线的<span class='line'></span></div>");
			    		return;
			    	}
			    	createHtml(json);
			    }
			}
			detail = function(id){
				window.location.href="detail.html?shareId="+id;
			}
		</script>
	</body>
</html>
